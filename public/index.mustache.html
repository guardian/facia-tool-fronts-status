<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Fronts status</title>
		<link rel="stylesheet" href="style.css">
	</head>
	<body class="bluebell">
		<main class="main-content">
			<div class="row">
				<div class="col three-quarters">
					<div class="card card--filters">
						<div class="card-content">
							<table>
								<tbody>
									<tr>
										<th class="one-quarter">Priorities</th>
										<td class="filter">
											{{#priorities}}
												<label class="filter--option">
													<input class="filter--checkbox group--priority"
														data-filter-by="text"
														data-group="priority"
														data-filter-cell="filterable--priority"
														type="checkbox" value="{{.}}" checked>
													<span class="filter--label">{{.}}</span>
												</label>
											{{/priorities}}
										</td>
									</tr>
									<tr>
										<th class="one-quarter">Last Edit</th>
										<td class="filter">
											<label class="filter--option">
												<span class="filter--label">more than</span>
												<input class="filter--date group--edit"
													data-filter-by="min"
													data-group="edit"
													data-filter-cell="filterable--edit"
													data-is-date='true'
													type="text" placeholder="min">
												ago
											</label>
											<label class="filter--option">
												<span class="filter--label">less than</span>
												<input class="filter--date group--edit"
													data-filter-by="max"
													data-group="edit"
													data-filter-cell="filterable--edit"
													data-is-date='true'
													type="text" placeholder="max">
												ago
											</label>
										</td>
									</tr>
									<tr>
										<th>Expired</th>
										<td class="filter">
											<label class="filter--option">
												<input class="filter--checkbox group--expired"
													data-filter-by="text"
													data-group="expired"
													data-filter-cell="filterable--expired"
													type="checkbox" value="yes" checked>
												<span class="filter--label">Yes</span>
											</label>
											<label class="filter--option">
												<input class="filter--checkbox group--expired"
													data-filter-by="text"
													data-group="expired"
													data-filter-cell="filterable--expired"
													type="checkbox" value="no" checked>
												<span class="filter--label">No</span>
											</label>
										</td>
									</tr>
									<tr>
										<th>Collections</th>
										<td class="filter">
											<label class="filter--option">
												<span class="filter--label">more than</span>
												<input class="filter--text group--collections"
													data-filter-by="min"
													data-group="collections"
													data-filter-cell="filterable--collections"
													type="text" placeholder="min">
											</label>
											<label class="filter--option">
												<span class="filter--label">less than</span>
												<input class="filter--text group--collections"
													data-filter-by="max"
													data-group="collections"
													data-filter-cell="filterable--collections"
													type="text" placeholder="max">
											</label>
										</td>
									</tr>
									<tr>
										<th>Trails</th>
										<td class="filter">
											<label class="filter--option">
												<span class="filter--label">more than</span>
												<input class="filter--text group--trails"
													data-filter-by="min"
													data-group="trails"
													data-filter-cell="filterable--trails"
													type="text" placeholder="min">
											</label>
											<label class="filter--option">
												<span class="filter--label">less than</span>
												<input class="filter--text group--trails"
													data-filter-by="max"
													data-group="trails"
													data-filter-cell="filterable--trails"
													type="text" placeholder="max">
											</label>
										</td>
									</tr>
									<tr>
										<th>Backfilled</th>
										<td class="filter">
											<label class="filter--option">
												<input class="filter--checkbox group--backfilled"
													data-filter-by="text"
													data-group="backfilled"
													data-filter-cell="filterable--backfilled"
													type="checkbox" value="yes" checked>
												<span class="filter--label">Yes</span>
											</label>
											<label class="filter--option">
												<input class="filter--checkbox group--backfilled"
													data-filter-by="text"
													data-group="backfilled"
													data-filter-cell="filterable--backfilled"
													type="checkbox" value="no" checked>
												<span class="filter--label">No</span>
											</label>
										</td>
									</tr>
									<tr>
										<th>Traffic</th>
										<td class="filter">
											<label class="filter--option">
												<span class="filter--label">more than</span>
												<input class="filter--text group--traffic"
													data-filter-by="min"
													data-group="traffic"
													data-filter-cell="filterable--traffic"
													type="text" placeholder="min">
											</label>
											<label class="filter--option">
												<span class="filter--label">less than</span>
												<input class="filter--text group--traffic"
													data-filter-by="max"
													data-group="traffic"
													data-filter-cell="filterable--traffic"
													type="text" placeholder="max">
											</label>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>

				<div class="col vertical one-quarter">
					<div class="card card--notes">
						<div class="card-content">
							<p>
								Page created on <br>
								<span class="date date--created" data-timestamp="{{createdTimestamp}}">{{created}}</span>.
							</p>
							<p><a href="http://github.com/guardian/facia-tool-fronts-status">GitHub</a></p>
						</div>
					</div>
					<div class="card card--notes">
						<div class="card-content">
							<p>
								Showing <span class="number fronts--count">{{fronts.length}}</span> fronts.
							</p>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="card card--stats">
					<div class="card-visual">
						<table class="sortable">
							<thead>
								<tr>
									<th class="cell--large">Front</th>
									<th class="cell--large">Priority</th>
									<th class="cell--large">Last Edit</th>
									<th class="cell--small">Expired <sup>*1</sup></th>
									<th class="cell--small">Collections</th>
									<th class="cell--small">Trails <sup>*2</sup></th>
									<th class="cell--small">Backfilled</th>
									<th class="cell--small">Traffic <sup>*3</sup></th>
								</tr>
							</thead>
							<tfoot>
								<tr>
									<td colspan="8">
										<ul class="table-notes">
											<li><sup>*1</sup> Using DFP information last updated on <span class="date">{{lastExpiredUpdated}}</span>.</li>
											<li><sup>*2</sup> Number of trails in live collections, including draft content.</li>
											<li><sup>*3</sup> Ophan hits in the last 15 days.</li>
										</ul>
									</td>
								</tr>
							</tfoot>
							<tbody>
								{{#fronts}}
									<tr class="filterable">
										<td><a href="http://theguardian.com/{{id}}" target="_blank">{{id}}</a></td>
										<td class="filterable--priority">{{priority}}</td>
										<td class="filterable--edit" sorttable_customkey="{{lastUpdated}}">{{lastUpdatedHuman}}</td>
										<td class="filterable--expired">{{expired}}</td>
										<td class="filterable--collections" class="number">{{collectionsCount}}</td>
										<td class="filterable--trails" class="number">{{trailsCount}}</td>
										<td class="filterable--backfilled">{{backfilled}}</td>
										<td class="filterable--traffic" sorttable_customkey="{{hits}}" class="number">{{traffic}}</td>
									</tr>
								{{/fronts}}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</main>

		<script src="sorttable.js"></script>
		<script src="moment.min.js"></script>
		<script src="filter.js"></script>
	</body>
</html>
